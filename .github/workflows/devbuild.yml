# Copyright (c) 2022 Joshua Schmitt
# 
# This software is released under the MIT License.
# https://opensource.org/licenses/MIT

name: ğŸ¹ Development

on:
  push:
    branches: [ master ]
  pull_request:
    branches: [ master ]

  workflow_dispatch:

jobs:

  build_19:
    name: ğŸ¸ Build 1.19
    runs-on: ubuntu-latest
    steps:
      - name: ğŸ” Checkout
        uses: actions/checkout@v2
      - name: ğŸ“¦ ZIP
        uses: vimtor/action-zip@v1
        with:
          files: assets/ pack.mcmeta pack.png credits.md
          dest: pack.zip
      - name: ğŸ¹ Upload
        uses: actions/upload-artifact@v2.3.1
        with:
          name: JqshuvPack-1.19.X
          path: |
            assets/
            pack.mcmeta 
            pack.png 
            credits.md

  build_old:
    name: ğŸ Build Old
    runs-on: ubuntu-latest
    strategy:
      matrix:
        version: [1.16, 1.17, 1.18]
    steps:
      - name: ğŸ” Checkout
        uses: actions/checkout@v2
        with:
          ref: 'ver/${{ matrix.version }}'
      - name: ğŸ“¦ ZIP
        uses: vimtor/action-zip@v1
        with:
          files: assets/ pack.mcmeta pack.png credits.md
          dest: pack.zip
      - name: ğŸ¹ Upload
        uses: actions/upload-artifact@v2.3.1
        with:
          name: JqshuvPack-${{ matrix.version }}.X
          path: |
            assets/
            pack.mcmeta 
            pack.png 
            credits.md

  zip_build:
    name: "ğŸ“­ Build ZIP Release"
    needs: [build_old, build_19]
    runs-on: ubuntu-latest
    strategy:
      matrix:
        version: [1.16, 1.17, 1.18, 1.19]
    steps:
      - name: "ğŸ”½ Download Packs"
        uses: actions/download-artifact@v2
        with:
          name: JqshuvPack-${{ matrix.version }}.X
          path: temp-${{ matrix.version }}
      - name: ğŸ“¦ ZIP
        uses: vimtor/action-zip@v1
        with:
          files: temp-${{ matrix.version }}/*
          dest: JqshuvPack-${{ matrix.version }}.X.zip
      - name: ğŸ¹ Upload
        uses: actions/upload-artifact@v2.3.1
        with:
          name: JqshuvPack-${{ matrix.version }}.X
          path: packs